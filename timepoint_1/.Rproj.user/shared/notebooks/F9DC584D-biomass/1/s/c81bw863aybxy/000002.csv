"0","#Read in biomass data"
"0","Data <- read.csv(""data/1_biomass/1_biomass_data.csv"")"
"0","Data <- na.omit(Data)"
"0","# Change POC-42 pan 221 from Sym to Host -- was recorded twice as Sym, assuming pan with more mass is host"
"0","Data[Data$Pan.ID == 221, ""partner""] <- ""Host"""
"0","# Remove pan 73 -- from lab notebook, material was stuck in pipet tip, and result is outlier"
"0","Data[Data$Pan.ID == 73, ] <- NA"
"0","  "
"0","# set sample volumes to calculated mass per ml of sample added to pans"
"0","#different volumes for sym (4ml) and host (5ml)"
"0","sym.vol <- 5"
"0","host.vol <- 4"
"0","#Load tissue homogenate volume"
"0","homog_vol <- read.csv(""data/1_homogenate_vols/1_homogenate_vols.csv"", header=TRUE)"
"0","# Load Surface area data"
"0","sa <- read.csv(""output/1_surface_area.csv"")"
"0","# Coral sample metadata"
"0","metadata <- read_csv(""../metadata/coral_metadata.csv"") %>% select(1:3)"
"0","# Join homogenate volumes and surface area with sample metadata"
"0","metadata <- full_join(metadata, homog_vol) %>%"
"0","  full_join(sa)"
"0","# Join AFDW data with metadata"
"0","afdw <- left_join(Data, metadata) %>%"
"0","  mutate(dry.biomass.g = dry.pan.mass.g - initial.mass.g,"
"0","         burnt.biomass.g = dry.pan.mass.g - burnt.pan.mass.g,"
"0","         dry.biomass.g.ml = case_when(partner == ""Host"" ~ dry.biomass.g / host.vol, "
"0","                                      partner == ""Sym""  ~ dry.biomass.g / sym.vol),"
"0","         burnt.biomass.g.ml = case_when(partner == ""Host"" ~ dry.biomass.g / host.vol, "
"0","                                        partner == ""Sym""  ~ dry.biomass.g / sym.vol),"
"0","         dry.biomass.g.coral = dry.biomass.g.ml * homog_vol_ml,"
"0","         burnt.biomass.g.coral = burnt.biomass.g.ml * homog_vol_ml,"
"0","         DW.mg.cm2 = ((dry.biomass.g.coral)*1000) / surface.area.cm2,"
"0","         AFDW.mg.cm2 = ((burnt.biomass.g.coral)*1000) / surface.area.cm2)"
"0","# Filter out samples that are duplicated in the dataset (one of them might have been different sample with a data entry error, but no way to know for sure)"
"0","afdw <- afdw %>%"
"0","  group_by(colony_id) %>%"
"0","  summarise(n = n()) %>%"
"0","  filter(n == 2) %>%"
"0","  left_join(afdw) %>%"
"0","  ungroup()"
